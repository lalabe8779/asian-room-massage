<div class="pb-12">
    <div class="max-h-96 overflow-y-hidden relative">
        <h1 class="absolute inset-0 w-full h-full flex items-center justify-center text-3xl text-white tracking-wide uppercase">
            {{title}}
        </h1>

        {{hero_image}}
            {{partial:partials/hero}}
        {{/hero_image}}
    </div>

    <div class="max-w-5xl mx-auto py-8 space-y-8">
        <div class="space-y-6 max-w-lg mx-auto text-center">
            {{intro | classify }}
        </div>

        {{ collection:therapists as="therapist" }}
            {{partial:partials/therapists}}
        {{ /collection:therapists }}
    </div>


    {{ collection:therapists as="therapist" }}
        <ul
            x-data="{size: {{ therapist|count }} * 2,  active: 0, direction: 1}"
            class="snap overflow-x-auto overflow-y-hidden relative flex-no-wrap flex transition-all"
            x-ref="slider"
            x-init="setInterval(() => {
                active = Math.round(((active + 1) * direction) % size);

                if (active === 0) {
                    direction *= -1;
                }

                $refs.slider.scrollLeft = $refs.slider.scrollLeft + (($refs.slider.scrollWidth / size) * direction);
            }, 2000);"
            x-on:scroll.debounce="active = Math.round($event.target.scrollLeft / ($event.target.scrollWidth / size))"
        >
            {{therapist scope="therapist"}}
                {{ images limit="2" }}
                    <li class="h-full flex-shrink-0">
                        <a href="{{ therapist:url }}">
                            <div
                                class="box-image py-64 opacity-75 hover:opacity-100"
                                style="background-image: url({{glide:url width="500" height="500" }}); width: 500px"
                            ></div>
                        </a>
                    </li>
                {{/images}}
            {{/therapist}}
        </ul>
    {{ /collection:therapists }}
</div>
